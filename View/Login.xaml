<Window x:Class="HouseholdMS.View.Login" 
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Login"
        Width="1100" Height="680"
        MinWidth="980" MinHeight="560"
        SizeToContent="Height"
        WindowStartupLocation="CenterScreen"
        ResizeMode="CanMinimize"
        Background="#f0f2f5">
    <Grid
        FocusManager.FocusedElement="{Binding ElementName=LoginUsernameBox}">

        <!-- Decorative left rail (overlay; doesn't affect centering) -->
        <Border HorizontalAlignment="Left"
                VerticalAlignment="Stretch"
                Width="260"
                Background="#e9edf3"/>

        <!-- Content area with wide L/R margins for whitespace -->
        <Grid Margin="160,40,160,40">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <ScrollViewer Grid.Column="1"
                          HorizontalAlignment="Center"
                          VerticalAlignment="Center"
                          HorizontalScrollBarVisibility="Disabled"
                          VerticalScrollBarVisibility="Auto">
                <Grid>

                    <!-- ===== LOGIN CARD ===== -->
                    <Border x:Name="LoginCard"
                            Background="White"
                            BorderBrush="#DDDDDD"
                            BorderThickness="1"
                            CornerRadius="12"
                            Padding="24"
                            MinWidth="360"
                            MaxWidth="560"
                            HorizontalAlignment="Center"
                            VerticalAlignment="Center"
                            Visibility="Visible">
                        <Border.LayoutTransform>
                            <ScaleTransform
                                ScaleX="{DynamicResource AppUiScale}"
                                ScaleY="{DynamicResource AppUiScale}"/>
                        </Border.LayoutTransform>

                        <StackPanel>
                            <TextBlock Text="Welcome Back"
                                       FontSize="28"
                                       FontWeight="Bold"
                                       Foreground="#333333"
                                       TextAlignment="Center"
                                       Margin="0,0,0,24"/>

                            <TextBlock Text="Username" FontSize="13" Margin="5,0,0,4" Foreground="#555555"/>
                            <TextBox x:Name="LoginUsernameBox"
                                     Height="40" Margin="0,0,0,12" Padding="10,0"
                                     Background="#FAFAFA" BorderBrush="#CCCCCC" BorderThickness="1"
                                     VerticalContentAlignment="Center" />

                            <TextBlock Text="Password" FontSize="13" Margin="5,0,0,4" Foreground="#555555"/>
                            <PasswordBox x:Name="LoginPasswordBox"
                                         Height="40" Margin="0,0,0,20" Padding="10,0"
                                         Background="#FAFAFA" BorderBrush="#CCCCCC" BorderThickness="1"
                                         VerticalContentAlignment="Center" />

                            <Button x:Name="LoginBtn"
                                    Content="Login"
                                    Height="44" Background="#4CAF50" Foreground="White"
                                    FontWeight="Bold" BorderThickness="0"
                                    Margin="0,0,0,12"
                                    IsDefault="True"
                                    Click="Login_Click"/>

                            <Button Content="Register New User"
                                    Height="40" Background="#DDDDDD" Foreground="#333333"
                                    FontWeight="SemiBold" BorderThickness="0"
                                    Margin="0,0,0,12"
                                    Click="ShowRegister_Click"/>

                            <Button x:Name="ExitBtn"
                                    Content="Exit"
                                    Height="40" Background="#E53935" Foreground="White"
                                    FontWeight="SemiBold" BorderThickness="0"
                                    IsCancel="True"
                                    Click="Exit_Click"/>
                        </StackPanel>
                    </Border>

                    <!-- ===== REGISTER CARD ===== -->
                    <Border x:Name="RegisterCard"
                            Background="White"
                            BorderBrush="#DDDDDD"
                            BorderThickness="1"
                            CornerRadius="12"
                            Padding="24"
                            MinWidth="360"
                            MaxWidth="560"
                            HorizontalAlignment="Center"
                            VerticalAlignment="Center"
                            Visibility="Collapsed">
                        <Border.LayoutTransform>
                            <ScaleTransform
                                ScaleX="{DynamicResource AppUiScale}"
                                ScaleY="{DynamicResource AppUiScale}"/>
                        </Border.LayoutTransform>

                        <StackPanel>
                            <TextBlock Text="Create New Account"
                                       FontSize="28"
                                       FontWeight="Bold"
                                       Foreground="#333333"
                                       TextAlignment="Center"
                                       Margin="0,0,0,24"/>

                            <TextBlock Text="Name" FontSize="13" Margin="5,0,0,4" Foreground="#555555"/>
                            <TextBox x:Name="RegNameBox"
                                     Height="40" Margin="0,0,0,12" Padding="10,0"
                                     Background="#FAFAFA" BorderBrush="#CCCCCC" BorderThickness="1"
                                     VerticalContentAlignment="Center" />

                            <TextBlock Text="Username" FontSize="13" Margin="5,0,0,4" Foreground="#555555"/>
                            <TextBox x:Name="RegUsernameBox"
                                     Height="40" Margin="0,0,0,12" Padding="10,0"
                                     Background="#FAFAFA" BorderBrush="#CCCCCC" BorderThickness="1"
                                     VerticalContentAlignment="Center" />

                            <TextBlock Text="Password" FontSize="13" Margin="5,0,0,4" Foreground="#555555"/>
                            <PasswordBox x:Name="RegPasswordBox"
                                         Height="40" Margin="0,4,0,4" Padding="10,0"
                                         Background="#FAFAFA" BorderBrush="#CCCCCC" BorderThickness="1"
                                         VerticalContentAlignment="Center" />

                            <!-- Password rules note -->
                            <TextBlock Margin="0,0,0,10"
                                       FontSize="12"
                                       Foreground="#666666"
                                       TextWrapping="Wrap">
                                Password must be longer than 6 characters and include at least one number or symbol. 
                                It cannot be the same as your Name or Username.
                            </TextBlock>

                            <TextBlock Text="Confirm Password" FontSize="13" Margin="5,0,0,4" Foreground="#555555"/>
                            <PasswordBox x:Name="RegConfirmPasswordBox"
                                         Height="40" Margin="0,0,0,16" Padding="10,0"
                                         Background="#FAFAFA" BorderBrush="#CCCCCC" BorderThickness="1"
                                         VerticalContentAlignment="Center" />

                            <!-- Technician toggle -->
                            <CheckBox x:Name="IsTechnicianCheck"
                                      Style="{x:Null}"
                                      Visibility="Visible"
                                      IsEnabled="True"
                                      Content="I'm a technician (request approval)"
                                      FontWeight="SemiBold"
                                      Foreground="#333333"
                                      Margin="0,0,0,8"
                                      Checked="Reg_TechCheck_Toggled"
                                      Unchecked="Reg_TechCheck_Toggled"/>

                            <!-- Technician details -->
                            <StackPanel x:Name="TechDetailsPanel" Visibility="Collapsed">
                                <Separator Margin="0,0,0,12"/>

                                <TextBlock Text="Phone (digits only, 8–15)" FontSize="13" Margin="5,0,0,4" Foreground="#555555"/>
                                <TextBox x:Name="RegPhoneBox"
                                         Height="36" Margin="0,0,0,8" Padding="10,0"
                                         Background="#FAFAFA" BorderBrush="#CCCCCC" BorderThickness="1"
                                         VerticalContentAlignment="Center"
                                         PreviewTextInput="DigitsOnly_PreviewTextInput"
                                         DataObject.Pasting="DigitsOnly_OnPaste"/>

                                <TextBlock Text="Address (required for technician)" FontSize="13" Margin="5,0,0,4" Foreground="#555555"/>
                                <TextBox x:Name="RegAddressBox"
                                         Height="36" Margin="0,0,0,8" Padding="10,0"
                                         Background="#FAFAFA" BorderBrush="#CCCCCC" BorderThickness="1"
                                         VerticalContentAlignment="Center"/>

                                <TextBlock Text="Assigned Area (required for technician)" FontSize="13" Margin="5,0,0,4" Foreground="#555555"/>
                                <TextBox x:Name="RegAreaBox"
                                         Height="36" Margin="0,0,0,8" Padding="10,0"
                                         Background="#FAFAFA" BorderBrush="#CCCCCC" BorderThickness="1"
                                         VerticalContentAlignment="Center"/>

                                <TextBlock Text="Note (optional)" FontSize="13" Margin="5,0,0,4" Foreground="#555555"/>
                                <TextBox x:Name="RegNoteBox"
                                         Height="60" Margin="0,0,0,8"
                                         TextWrapping="Wrap" AcceptsReturn="True"
                                         Padding="8,6"
                                         Background="#FAFAFA" BorderBrush="#CCCCCC" BorderThickness="1"/>
                            </StackPanel>

                            <Button x:Name="RegisterBtn"
                                    Content="Register"
                                    Height="44" Background="#4CAF50" Foreground="White"
                                    FontWeight="Bold" BorderThickness="0"
                                    Margin="0,8,0,12"
                                    Click="RegisterButton_Click"/>

                            <Button Content="Back to Login"
                                    Height="40" Background="#DDDDDD" Foreground="#333333"
                                    FontWeight="SemiBold" BorderThickness="0"
                                    Click="BackToLoginButton_Click"/>
                        </StackPanel>
                    </Border>

                </Grid>
            </ScrollViewer>
        </Grid>
    </Grid>
</Window>
