<Window x:Class="HouseholdMS.View.UserControls.YrMeteogramWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Meteogram — yr.no" Height="720" Width="1100"
        WindowStartupLocation="CenterOwner">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <DockPanel Grid.Row="0" LastChildFill="False" Margin="8">
            <TextBlock Text="🌤 Full Meteogram (yr.no)" FontWeight="Bold" FontSize="16"
                       VerticalAlignment="Center" DockPanel.Dock="Left"/>
            <StackPanel Orientation="Horizontal" DockPanel.Dock="Right">
                <Button Content="Reload" Click="BtnReload_Click" Padding="12,6"/>
            </StackPanel>
        </DockPanel>

        <!-- Content: tabs -->
        <TabControl Grid.Row="1" x:Name="Tabs">
            <!-- Meteogram -->
            <TabItem Header="Meteogram">
                <Grid>
                    <Grid x:Name="WebHost"/>
                    <Border x:Name="FallbackPanel" Visibility="Collapsed"
                            Background="#FFF9F9F9" BorderBrush="#DDD" BorderThickness="1"
                            CornerRadius="8" Padding="14" Margin="8">
                        <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center" Width="560">
                            <TextBlock Text="Can’t display the meteogram here." FontWeight="Bold" FontSize="14" TextAlignment="Center"/>
                            <TextBlock x:Name="TxtError" Foreground="#A33" TextWrapping="Wrap" TextAlignment="Center" Margin="0,6,0,0"/>
                            <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,6,0,0">
                                <Button Content="Retry" Click="BtnReload_Click" Padding="10,4"/>
                            </StackPanel>
                        </StackPanel>
                    </Border>
                </Grid>
            </TabItem>

            <!-- Hourly -->
            <TabItem Header="Hourly">
                <Grid>
                    <DataGrid x:Name="HourlyGrid"
                              AutoGenerateColumns="False"
                              CanUserAddRows="False"
                              CanUserDeleteRows="False"
                              IsReadOnly="True"
                              HeadersVisibility="Column"
                              GridLinesVisibility="Horizontal"
                              Margin="8">
                        <DataGrid.Columns>
                            <DataGridTextColumn Header="Time" Binding="{Binding TimeLocal, StringFormat=\{0:g\}}" Width="Auto"/>
                            <DataGridTextColumn Header="Symbol" Binding="{Binding Symbol}" Width="*"/>
                            <DataGridTextColumn Header="Temp °C" Binding="{Binding Temp, StringFormat=\{0:0.#\}}" Width="Auto"/>
                            <DataGridTextColumn Header="Wind m/s" Binding="{Binding Wind, StringFormat=\{0:0.#\}}" Width="Auto"/>
                            <DataGridTextColumn Header="Gust m/s" Binding="{Binding Gust, StringFormat=\{0:0.#\}}" Width="Auto"/>
                            <DataGridTextColumn Header="Precip mm" Binding="{Binding Precip, StringFormat=\{0:0.#\}}" Width="Auto"/>
                            <DataGridTextColumn Header="Humidity %" Binding="{Binding Humidity, StringFormat=\{0:0\}}" Width="Auto"/>
                            <DataGridTextColumn Header="Pressure hPa" Binding="{Binding Pressure, StringFormat=\{0:0\}}" Width="Auto"/>
                            <DataGridTextColumn Header="Cloud %" Binding="{Binding Cloud, StringFormat=\{0:0\}}" Width="Auto"/>
                            <DataGridTextColumn Header="Wind dir°" Binding="{Binding WindDir, StringFormat=\{0:0\}}" Width="Auto"/>
                        </DataGrid.Columns>
                    </DataGrid>

                    <TextBlock x:Name="HourlyEmpty"
                               Text="Hourly data not available for this location."
                               Foreground="#666"
                               Visibility="Collapsed"
                               HorizontalAlignment="Center" VerticalAlignment="Center"/>
                </Grid>
            </TabItem>

            <!-- Daily -->
            <TabItem Header="Daily">
                <Grid>
                    <DataGrid x:Name="DailyGrid"
                              AutoGenerateColumns="False"
                              CanUserAddRows="False"
                              CanUserDeleteRows="False"
                              IsReadOnly="True"
                              HeadersVisibility="Column"
                              GridLinesVisibility="Horizontal"
                              Margin="8">
                        <DataGrid.Columns>
                            <DataGridTextColumn Header="Date" Binding="{Binding Date, StringFormat=\{0:yyyy-MM-dd\}}" Width="Auto"/>
                            <DataGridTextColumn Header="Min °C" Binding="{Binding MinTemp, StringFormat=\{0:0.#\}}" Width="Auto"/>
                            <DataGridTextColumn Header="Max °C" Binding="{Binding MaxTemp, StringFormat=\{0:0.#\}}" Width="Auto"/>
                            <DataGridTextColumn Header="Precip mm" Binding="{Binding TotalPrecip, StringFormat=\{0:0.#\}}" Width="Auto"/>
                            <DataGridTextColumn Header="Max wind m/s" Binding="{Binding MaxWind, StringFormat=\{0:0.#\}}" Width="Auto"/>
                            <DataGridTextColumn Header="Max gust m/s" Binding="{Binding MaxGust, StringFormat=\{0:0.#\}}" Width="Auto"/>
                        </DataGrid.Columns>
                    </DataGrid>

                    <TextBlock x:Name="DailyEmpty"
                               Text="Daily summary not available."
                               Foreground="#666"
                               Visibility="Collapsed"
                               HorizontalAlignment="Center" VerticalAlignment="Center"/>
                </Grid>
            </TabItem>
        </TabControl>

        <!-- Status -->
        <TextBlock Grid.Row="2" x:Name="LblStatus" Foreground="#666" FontSize="12" Margin="8"/>
    </Grid>
</Window>
