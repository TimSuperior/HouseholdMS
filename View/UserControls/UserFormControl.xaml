<UserControl x:Class="HouseholdMS.View.UserControls.UserFormControl" 
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:System="clr-namespace:System;assembly=mscorlib"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             mc:Ignorable="d"
             Background="White"
             d:DesignHeight="600"
             d:DesignWidth="480">

    <Border Padding="22"
            CornerRadius="12"
            BorderBrush="#e0e0e0"
            BorderThickness="1"
            Background="White"
            SnapsToDevicePixels="True">

        <Grid>
            <Grid.Resources>
                <Style x:Key="ErrorBoxStyle" TargetType="Control">
                    <Setter Property="BorderBrush" Value="#C0C0C0"/>
                    <Setter Property="BorderThickness" Value="1"/>
                    <Style.Triggers>
                        <Trigger Property="Tag" Value="error">
                            <Setter Property="BorderBrush" Value="Red"/>
                            <Setter Property="BorderThickness" Value="1.5"/>
                        </Trigger>
                    </Style.Triggers>
                </Style>
                <Style x:Key="Lbl" TargetType="TextBlock">
                    <Setter Property="FontWeight" Value="SemiBold"/>
                    <Setter Property="Margin" Value="0,8,0,4"/>
                </Style>
            </Grid.Resources>

            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <!-- Header -->
            <TextBlock x:Name="FormHeader"
                       Grid.Row="0"
                       FontSize="18"
                       FontWeight="Bold"
                       Foreground="#2E3B4E"
                       Margin="0,0,0,10"
                       Text="✏ Edit User"/>

            <!-- Form Fields -->
            <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto">
                <StackPanel>

                    <TextBlock Text="Name" Style="{StaticResource Lbl}"/>
                    <TextBox x:Name="NameBox" Height="32" Style="{StaticResource ErrorBoxStyle}"/>

                    <TextBlock Text="Username" Style="{StaticResource Lbl}"/>
                    <TextBox x:Name="UsernameBox" Height="32" Style="{StaticResource ErrorBoxStyle}"/>

                    <TextBlock Text="Role" Style="{StaticResource Lbl}"/>
                    <ComboBox x:Name="RoleComboBox" Height="32" Style="{StaticResource ErrorBoxStyle}">
                        <ComboBoxItem Content="Guest"/>
                        <ComboBoxItem Content="Technician"/>
                        <ComboBoxItem Content="Admin"/>
                    </ComboBox>

                    <!-- Passwords -->
                    <!-- Required on ADD. Optional on EDIT (but if provided, must pass rules). -->
                    <TextBlock x:Name="PasswordLabel" Text="Password (required on add)" Style="{StaticResource Lbl}"/>
                    <PasswordBox x:Name="PasswordBox" Height="32" Style="{StaticResource ErrorBoxStyle}"/>

                    <TextBlock Text="Confirm Password" Style="{StaticResource Lbl}"/>
                    <PasswordBox x:Name="ConfirmPasswordBox" Height="32" Style="{StaticResource ErrorBoxStyle}"/>

                    <!-- Password rules note (same logic as Login/Register) -->
                    <TextBlock Margin="0,4,0,8"
                               FontSize="12"
                               Foreground="#666666"
                               TextWrapping="Wrap">
                        Password must be longer than 6 characters and include at least one number or symbol. 
                        It cannot be the same as the Name or the Username.
                    </TextBlock>

                    <Separator Margin="0,10,0,6"/>

                    <TextBlock Text="Phone (Technician required)" Style="{StaticResource Lbl}"/>
                    <TextBox x:Name="PhoneBox" Height="32" Style="{StaticResource ErrorBoxStyle}"/>

                    <TextBlock Text="Address (Technician required)" Style="{StaticResource Lbl}"/>
                    <TextBox x:Name="AddressBox" Height="32" Style="{StaticResource ErrorBoxStyle}"/>

                    <TextBlock Text="Assigned Area (Technician required)" Style="{StaticResource Lbl}"/>
                    <TextBox x:Name="AreaBox" Height="32" Style="{StaticResource ErrorBoxStyle}"/>

                    <TextBlock Text="Note" Style="{StaticResource Lbl}"/>
                    <TextBox x:Name="NoteBox" Height="60" AcceptsReturn="True" TextWrapping="Wrap"
                             Style="{StaticResource ErrorBoxStyle}"/>
                </StackPanel>
            </ScrollViewer>

            <!-- Buttons -->
            <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,12,0,0">
                <Button x:Name="SaveButton"
                        Content="✔ Save"
                        Width="120"
                        Height="36"
                        FontWeight="Bold"
                        Background="#4CAF50"
                        Foreground="White"
                        Margin="0,0,10,0"
                        Click="Save_Click"/>

                <Button Content="✖ Close"
                        Width="100"
                        Height="36"
                        FontWeight="Bold"
                        Background="#F44336"
                        Foreground="White"
                        Margin="0,0,10,0"
                        Click="Cancel_Click"/>

                <Button x:Name="DeleteButton"
                        Content="🗑 Delete"
                        Width="100"
                        Height="36"
                        FontWeight="Bold"
                        Background="#9E1B1B"
                        Foreground="White"
                        Visibility="Collapsed"
                        Click="Delete_Click"/>
            </StackPanel>
        </Grid>
    </Border>
</UserControl>
