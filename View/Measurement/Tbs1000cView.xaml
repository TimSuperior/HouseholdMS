<UserControl x:Class="HouseholdMS.View.Measurement.Tbs1000cView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:syncfusion="http://schemas.syncfusion.com/wpf"
             xmlns:res="clr-namespace:HouseholdMS.Resources"
             MinWidth="1040" MinHeight="760"
             FontFamily="Segoe UI" FontSize="13"
             SnapsToDevicePixels="True" UseLayoutRounding="True"
             TextOptions.TextFormattingMode="Display"
             TextOptions.TextRenderingMode="ClearType"
             RenderOptions.ClearTypeHint="Enabled">

    <!-- === Shared palette & styles (aligned with MeasurementView) === -->
    <UserControl.Resources>
        <!-- Palette -->
        <SolidColorBrush x:Key="PageBg"           Color="#F3F4F6"/>
        <SolidColorBrush x:Key="AccentBrush"      Color="#3B82F6"/>
        <SolidColorBrush x:Key="AccentBrushHover" Color="#2563EB"/>
        <SolidColorBrush x:Key="HeaderFg"         Color="#111827"/>
        <SolidColorBrush x:Key="BodyFg"           Color="#374151"/>
        <SolidColorBrush x:Key="SubtleFg"         Color="#6B7280"/>
        <SolidColorBrush x:Key="CardBg"           Color="#FFFFFFFF"/>
        <SolidColorBrush x:Key="CardBorder"       Color="#E5E7EB"/>

        <!-- Card container -->
        <Style x:Key="Card" TargetType="Border">
            <Setter Property="Padding" Value="14"/>
            <Setter Property="CornerRadius" Value="12"/>
            <Setter Property="Background" Value="{StaticResource CardBg}"/>
            <Setter Property="BorderBrush" Value="{StaticResource CardBorder}"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="SnapsToDevicePixels" Value="True"/>
        </Style>

        <!-- Section title -->
        <Style x:Key="SectionTitle" TargetType="TextBlock">
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Foreground" Value="{StaticResource HeaderFg}"/>
            <Setter Property="Margin" Value="0,0,0,6"/>
        </Style>

        <!-- Primary Button -->
        <Style TargetType="Button">
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="Background" Value="{StaticResource AccentBrush}"/>
            <Setter Property="Padding" Value="10,6"/>
            <Setter Property="MinWidth" Value="80"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="SnapsToDevicePixels" Value="True"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="bd" Background="{TemplateBinding Background}" CornerRadius="8">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"
                                              RecognizesAccessKey="True"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="bd" Property="Background" Value="{StaticResource AccentBrushHover}"/>
                            </Trigger>
                            <Trigger Property="IsEnabled" Value="False">
                                <Setter TargetName="bd" Property="Opacity" Value="0.5"/>
                                <Setter Property="Cursor" Value="Arrow"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Inputs -->
        <Style TargetType="ComboBox">
            <Setter Property="MinWidth" Value="120"/>
            <Setter Property="Margin" Value="0,0,8,0"/>
            <Setter Property="SnapsToDevicePixels" Value="True"/>
        </Style>
        <Style TargetType="TextBox">
            <Setter Property="Margin" Value="0,0,6,0"/>
            <Setter Property="VerticalContentAlignment" Value="Center"/>
        </Style>
        <Style TargetType="TextBlock">
            <Setter Property="VerticalAlignment" Value="Center"/>
            <Setter Property="Foreground" Value="{StaticResource BodyFg}"/>
        </Style>
        <Style TargetType="GroupBox">
            <Setter Property="Padding" Value="6"/>
            <Setter Property="Margin" Value="0,8,0,0"/>
        </Style>
        <Style TargetType="Expander">
            <Setter Property="Margin" Value="0,8,0,0"/>
        </Style>
    </UserControl.Resources>

    <!-- === Layout === -->
    <Grid Background="{StaticResource PageBg}">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="200"/>
        </Grid.RowDefinitions>

        <!-- Header / Connection (Card) -->
        <Border Grid.Row="0" Margin="16,16,16,8" Style="{StaticResource Card}">
            <DockPanel LastChildFill="False">
                <StackPanel DockPanel.Dock="Left">
                    <TextBlock Text="{x:Static res:Strings.TBS_Header_Title}"
                               FontSize="20" FontWeight="Bold"
                               Foreground="{StaticResource HeaderFg}"/>
                    <TextBlock Text="{x:Static res:Strings.TBS_Header_Sub}"
                               Foreground="{StaticResource SubtleFg}"/>
                </StackPanel>

                <StackPanel Orientation="Horizontal" DockPanel.Dock="Right" VerticalAlignment="Center">
                    <Button Content="{x:Static res:Strings.TBS_Btn_Connect}" Click="Connect_Click" Margin="6,0,0,0"/>
                    <Button Content="{x:Static res:Strings.TBS_Btn_Disconnect}" Click="Disconnect_Click" Margin="8,0,0,0"/>
                    <Separator Width="10" Opacity="0"/>
                    <Button Content="{x:Static res:Strings.TBS_Btn_IDN}" Click="BtnIdn_Click" Margin="8,0,0,0"/>
                    <Button Content="{x:Static res:Strings.TBS_Btn_RST}" Click="BtnRst_Click" Margin="8,0,0,0"/>
                    <Button Content="{x:Static res:Strings.TBS_Btn_CLS}" Click="BtnCls_Click" Margin="8,0,0,0"/>
                    <Separator Width="10" Opacity="0"/>
                    <Button Content="{x:Static res:Strings.TBS_Btn_Autoset}" ToolTip="{x:Static res:Strings.TBS_Tooltip_Autoset}" Click="BtnAutoset_Click" Margin="8,0,0,0"/>
                </StackPanel>
            </DockPanel>
        </Border>

        <!-- Main Tabs -->
        <TabControl Grid.Row="1" Margin="16,8,16,16">
            <!-- GRAPH TAB -->
            <TabItem Header="{x:Static res:Strings.TBS_Tab_Graph}">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="360"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>

                    <!-- Top toolbar (Card) -->
                    <Border Grid.Row="0" Grid.ColumnSpan="2" Style="{StaticResource Card}" Margin="0,0,0,10">
                        <DockPanel LastChildFill="False">
                            <!-- Left: sources & live -->
                            <StackPanel Orientation="Horizontal" DockPanel.Dock="Left" VerticalAlignment="Center">
                                <TextBlock Text="{x:Static res:Strings.TBS_Label_Sources}" Margin="0,0,8,0"/>
                                <CheckBox x:Name="SrcCh1" Content="CH1" IsChecked="True" Margin="0,0,6,0"/>
                                <CheckBox x:Name="SrcCh2" Content="CH2" IsChecked="False" Margin="0,0,14,0"/>

                                <TextBlock Text="{x:Static res:Strings.TBS_Label_LiveHz}" Margin="0,0,6,0"/>
                                <TextBox x:Name="LiveHz" Width="56" Text="5" ToolTip="{x:Static res:Strings.TBS_Tooltip_LiveHz}"/>

                                <Button Content="{x:Static res:Strings.TBS_Btn_FitAll}" Click="BtnFitAll_Click" Margin="10,0,0,0"/>
                                <Button Content="{x:Static res:Strings.TBS_Btn_Clear}" Click="BtnClearCharts_Click" Margin="8,0,0,0"/>
                                <Button x:Name="BtnPauseLive" Content="{x:Static res:Strings.TBS_Btn_Pause}" Click="BtnPauseLive_Click" Margin="8,0,0,0"/>
                            </StackPanel>

                            <!-- Right: axis range -->
                            <StackPanel Orientation="Horizontal" DockPanel.Dock="Right" VerticalAlignment="Center">
                                <TextBlock Text="{x:Static res:Strings.TBS_Label_X}" Margin="6,0,4,0"/>
                                <CheckBox x:Name="XAuto" Content="{x:Static res:Strings.TBS_Label_Auto}" IsChecked="True" Margin="0,0,6,0"/>
                                <TextBox x:Name="XMin" Width="80" ToolTip="{x:Static res:Strings.TBS_Tooltip_XMin}"/>
                                <TextBox x:Name="XMax" Width="80" Margin="0,0,8,0" ToolTip="{x:Static res:Strings.TBS_Tooltip_XMax}"/>

                                <TextBlock Text="{x:Static res:Strings.TBS_Label_Y}" Margin="6,0,4,0"/>
                                <CheckBox x:Name="YAuto" Content="{x:Static res:Strings.TBS_Label_Auto}" IsChecked="True" Margin="0,0,6,0"/>
                                <TextBox x:Name="YMin" Width="80" ToolTip="{x:Static res:Strings.TBS_Tooltip_YMin}"/>
                                <TextBox x:Name="YMax" Width="80" Margin="0,0,8,0" ToolTip="{x:Static res:Strings.TBS_Tooltip_YMax}"/>

                                <Button Content="{x:Static res:Strings.TBS_Btn_ApplyRange}" Click="BtnApplyAxis_Click"/>
                                <Button Content="{x:Static res:Strings.TBS_Btn_AutoFromData}" Click="BtnAutoAxisFromData_Click" Margin="8,0,0,0"/>
                            </StackPanel>
                        </DockPanel>
                    </Border>

                    <!-- LEFT PANEL: Expanders (Card) -->
                    <ScrollViewer Grid.Row="1" Grid.Column="0" VerticalScrollBarVisibility="Auto" Margin="0,0,10,0">
                        <StackPanel>
                            <!-- Acquisition -->
                            <Border Style="{StaticResource Card}">
                                <StackPanel>
                                    <TextBlock Text="{x:Static res:Strings.TBS_Section_Acquisition}" Style="{StaticResource SectionTitle}"/>
                                    <WrapPanel>
                                        <Button Content="RUN" Click="BtnRun_Click"/>
                                        <Button Content="STOP" Click="BtnStop_Click" Margin="8,0,0,0"/>
                                        <Button Content="SINGLE" Click="BtnSingle_Click" Margin="8,0,0,0"/>
                                    </WrapPanel>
                                    <WrapPanel Margin="0,8,0,0">
                                        <TextBlock Text="{x:Static res:Strings.TBS_Label_Mode}" Margin="0,0,6,0"/>
                                        <ComboBox x:Name="AcqMode2" Width="140" SelectedIndex="0">
                                            <!-- SCPI keywords must remain untranslated -->
                                            <ComboBoxItem Content="SAMPLE"/>
                                            <ComboBoxItem Content="PEAK"/>
                                            <ComboBoxItem Content="HIRES"/>
                                            <ComboBoxItem Content="AVER"/>
                                        </ComboBox>
                                        <TextBlock Text="{x:Static res:Strings.TBS_Label_NumAvg}" Margin="8,0,6,0"/>
                                        <TextBox x:Name="AcqNumAvg2" Width="70" Text="16"/>
                                        <Button Content="{x:Static res:Strings.Common_Apply}" Click="BtnAcqApply2_Click" Margin="8,0,0,0"/>
                                    </WrapPanel>
                                </StackPanel>
                            </Border>

                            <!-- Timebase -->
                            <Border Style="{StaticResource Card}" Margin="0,10,0,0">
                                <StackPanel>
                                    <TextBlock Text="{x:Static res:Strings.TBS_Section_Timebase}" Style="{StaticResource SectionTitle}"/>
                                    <WrapPanel>
                                        <TextBlock Text="{x:Static res:Strings.TBS_Label_TbScale}" Margin="0,0,6,0"/>
                                        <TextBox x:Name="TbScale2" Width="90" Text="0.001"/>
                                        <TextBlock Text="{x:Static res:Strings.TBS_Label_TbPos}" Margin="8,0,6,0"/>
                                        <TextBox x:Name="TbPos2" Width="90" Text="0"/>
                                        <Button Content="{x:Static res:Strings.Common_Apply}" Click="BtnTbApply2_Click" Margin="8,0,0,0"/>
                                    </WrapPanel>
                                    <WrapPanel Margin="0,8,0,0">
                                        <TextBlock Text="{x:Static res:Strings.TBS_Label_RecordLen}" Margin="0,0,6,0"/>
                                        <TextBox x:Name="TbRecord" Width="90" Text="2000"/>
                                        <Button Content="{x:Static res:Strings.Common_Set}" Click="BtnTbRecord_Click" Margin="8,0,0,0"/>
                                        <CheckBox x:Name="TbRoll" Content="{x:Static res:Strings.TBS_Label_RollMode}" Margin="12,0,6,0"/>
                                        <Button Content="{x:Static res:Strings.Common_Apply}" Click="BtnTbRoll_Click"/>
                                        <Button Content="{x:Static res:Strings.TBS_Btn_SampleRateQ}" Click="BtnTbSrq_Click" Margin="8,0,0,0"/>
                                    </WrapPanel>
                                </StackPanel>
                            </Border>

                            <!-- Channel -->
                            <Border Style="{StaticResource Card}" Margin="0,10,0,0">
                                <StackPanel>
                                    <TextBlock Text="{x:Static res:Strings.TBS_Section_Channel}" Style="{StaticResource SectionTitle}"/>
                                    <TextBlock Text="{x:Static res:Strings.TBS_Info_ChannelApplies}" Foreground="{StaticResource SubtleFg}" Margin="0,0,0,6"/>
                                    <WrapPanel>
                                        <TextBlock Text="{x:Static res:Strings.TBS_Label_ChScale}" Margin="0,0,6,0"/>
                                        <TextBox x:Name="ChScaleG" Width="80" Text="1"/>
                                        <TextBlock Text="{x:Static res:Strings.TBS_Label_ChOffset}" Margin="8,0,6,0"/>
                                        <TextBox x:Name="ChOffsetG" Width="80" Text="0"/>
                                    </WrapPanel>
                                    <WrapPanel Margin="0,8,0,0">
                                        <TextBlock Text="{x:Static res:Strings.TBS_Label_Coupling}" Margin="0,0,6,0"/>
                                        <ComboBox x:Name="ChCouplingG" Width="100" SelectedIndex="0">
                                            <ComboBoxItem Content="DC"/>
                                            <ComboBoxItem Content="AC"/>
                                            <ComboBoxItem Content="GND"/>
                                        </ComboBox>
                                        <CheckBox x:Name="ChBWLimitG" Content="{x:Static res:Strings.TBS_Label_BWLimit}" Margin="8,0,0,0"/>
                                        <CheckBox x:Name="ChInvertG" Content="{x:Static res:Strings.TBS_Label_Invert}" Margin="8,0,0,0"/>
                                    </WrapPanel>
                                    <WrapPanel Margin="0,8,0,0">
                                        <Button Content="{x:Static res:Strings.Common_Apply}" Click="BtnChApplyFromChart_Click"/>
                                    </WrapPanel>
                                </StackPanel>
                            </Border>

                            <!-- Trigger -->
                            <Border Style="{StaticResource Card}" Margin="0,10,0,0">
                                <StackPanel>
                                    <TextBlock Text="{x:Static res:Strings.TBS_Section_Trigger}" Style="{StaticResource SectionTitle}"/>
                                    <WrapPanel>
                                        <TextBlock Text="{x:Static res:Strings.TBS_Label_Source}" Margin="0,0,6,0"/>
                                        <ComboBox x:Name="TrigSource" Width="100" SelectedIndex="0">
                                            <ComboBoxItem Content="CH1"/>
                                            <ComboBoxItem Content="CH2"/>
                                        </ComboBox>
                                        <TextBlock Text="{x:Static res:Strings.TBS_Label_Slope}" Margin="8,0,6,0"/>
                                        <ComboBox x:Name="TrigSlope" Width="100" SelectedIndex="0">
                                            <ComboBoxItem Content="RISe"/>
                                            <ComboBoxItem Content="FALL"/>
                                        </ComboBox>
                                    </WrapPanel>
                                    <WrapPanel Margin="0,8,0,0">
                                        <TextBlock Text="{x:Static res:Strings.TBS_Label_Coupling}" Margin="0,0,6,0"/>
                                        <ComboBox x:Name="TrigCoupling" Width="100" SelectedIndex="0">
                                            <ComboBoxItem Content="DC"/>
                                            <ComboBoxItem Content="AC"/>
                                            <ComboBoxItem Content="HFREJ"/>
                                            <ComboBoxItem Content="LFREJ"/>
                                        </ComboBox>
                                        <Button Content="{x:Static res:Strings.Common_Apply}" Click="BtnTrigApply_Click" Margin="8,0,0,0"/>
                                    </WrapPanel>
                                    <WrapPanel Margin="0,8,0,0">
                                        <TextBlock Text="{x:Static res:Strings.TBS_Label_LevelV}" Margin="0,0,6,0"/>
                                        <TextBox x:Name="TrigLevel" Width="90" Text="0.2"/>
                                        <Button Content="{x:Static res:Strings.TBS_Btn_SetLevel}" Click="BtnTrigLevel_Click" Margin="8,0,0,0"/>
                                        <TextBlock Text="{x:Static res:Strings.TBS_Label_Holdoff}" Margin="12,0,6,0"/>
                                        <TextBox x:Name="TrigHoldoff" Width="90" Text="0"/>
                                        <Button Content="{x:Static res:Strings.TBS_Btn_SetHoldoff}" Click="BtnTrigHoldoff_Click" Margin="8,0,0,0"/>
                                        <Button Content="{x:Static res:Strings.TBS_Btn_StateQ}" Click="BtnTrigState_Click" Margin="8,0,0,0"/>
                                    </WrapPanel>
                                </StackPanel>
                            </Border>

                            <!-- Cursors -->
                            <Border Style="{StaticResource Card}" Margin="0,10,0,0">
                                <StackPanel>
                                    <TextBlock Text="{x:Static res:Strings.TBS_Section_Cursors}" Style="{StaticResource SectionTitle}"/>
                                    <WrapPanel Margin="0,0,0,6">
                                        <Button x:Name="BtnCurToggle" Width="160" Content="{x:Static res:Strings.TBS_Cur_Enable}" Click="BtnCurToggle_Click"/>
                                        <TextBlock Text="{x:Static res:Strings.TBS_Label_Function}" Margin="12,0,6,0"/>
                                        <ComboBox x:Name="CurFunc" Width="140" SelectedIndex="1">
                                            <!-- SCPI keywords must remain untranslated -->
                                            <ComboBoxItem Content="HBARs"/>
                                            <ComboBoxItem Content="VBARs"/>
                                            <ComboBoxItem Content="SCREEN"/>
                                            <ComboBoxItem Content="WAVEform"/>
                                            <ComboBoxItem Content="OFF"/>
                                        </ComboBox>
                                        <Button Content="{x:Static res:Strings.Common_Apply}" Click="BtnCurApply_Click" Margin="8,0,0,0"/>
                                    </WrapPanel>

                                    <WrapPanel Margin="0,0,0,6">
                                        <TextBlock Text="{x:Static res:Strings.TBS_Label_H1}" Margin="0,0,6,0"/>
                                        <TextBox x:Name="CurH1" Width="80" Text="0"/>
                                        <TextBlock Text="{x:Static res:Strings.TBS_Label_H2}" Margin="8,0,6,0"/>
                                        <TextBox x:Name="CurH2" Width="80" Text="0.001"/>
                                        <Button Content="{x:Static res:Strings.TBS_Btn_SetH}" Click="BtnCurSetH_Click" Margin="8,0,0,0"/>
                                        <Button Content="Δt?" Click="BtnCurDeltaH_Click" Margin="8,0,0,0"/>
                                    </WrapPanel>

                                    <WrapPanel>
                                        <TextBlock Text="{x:Static res:Strings.TBS_Label_V1}" Margin="0,0,6,0"/>
                                        <TextBox x:Name="CurV1" Width="80" Text="0"/>
                                        <TextBlock Text="{x:Static res:Strings.TBS_Label_V2}" Margin="8,0,6,0"/>
                                        <TextBox x:Name="CurV2" Width="80" Text="1"/>
                                        <Button Content="{x:Static res:Strings.TBS_Btn_SetV}" Click="BtnCurSetV_Click" Margin="8,0,0,0"/>
                                        <Button Content="ΔV?" Click="BtnCurDeltaV_Click" Margin="8,0,0,0"/>
                                    </WrapPanel>
                                </StackPanel>
                            </Border>

                            <!-- Display -->
                            <Border Style="{StaticResource Card}" Margin="0,10,0,0">
                                <StackPanel>
                                    <TextBlock Text="{x:Static res:Strings.TBS_Section_Display}" Style="{StaticResource SectionTitle}"/>
                                    <WrapPanel>
                                        <CheckBox x:Name="DispPersistOn" Content="{x:Static res:Strings.TBS_Label_PersistOn}"/>
                                        <TextBlock Text="{x:Static res:Strings.TBS_Label_PersistSec}" Margin="12,0,6,0"/>
                                        <TextBox x:Name="DispPersistSec" Width="80" Text="3"/>
                                        <Button Content="{x:Static res:Strings.Common_Apply}" Click="BtnDispApply_Click" Margin="8,0,0,0"/>
                                    </WrapPanel>
                                </StackPanel>
                            </Border>
                        </StackPanel>
                    </ScrollViewer>

                    <!-- CHART (Card) -->
                    <Border Grid.Row="1" Grid.Column="1" Style="{StaticResource Card}">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="*"/>
                            </Grid.RowDefinitions>

                            <TextBlock Text="{x:Static res:Strings.TBS_Chart_TimeDomain}" Style="{StaticResource SectionTitle}" FontSize="16" Margin="0,0,0,6"/>

                            <syncfusion:SfChart x:Name="TimeChart" Grid.Row="1" Background="White" BorderBrush="#DDD" BorderThickness="1">
                                <syncfusion:SfChart.PrimaryAxis>
                                    <syncfusion:NumericalAxis x:Name="AxisTimeX" Header="{x:Static res:Strings.TBS_Axis_Time}" RangePadding="None"/>
                                </syncfusion:SfChart.PrimaryAxis>
                                <syncfusion:SfChart.SecondaryAxis>
                                    <syncfusion:NumericalAxis x:Name="AxisTimeY" Header="{x:Static res:Strings.TBS_Axis_Voltage}" RangePadding="None"/>
                                </syncfusion:SfChart.SecondaryAxis>
                                <syncfusion:SfChart.Behaviors>
                                    <syncfusion:ChartZoomPanBehavior EnableSelectionZooming="True" ZoomMode="XY"/>
                                    <syncfusion:ChartTrackBallBehavior/>
                                </syncfusion:SfChart.Behaviors>
                            </syncfusion:SfChart>
                        </Grid>
                    </Border>
                </Grid>
            </TabItem>

            <!-- MEASUREMENTS TAB -->
            <TabItem Header="{x:Static res:Strings.TBS_Tab_Measurements}">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel Margin="10">
                        <!-- Immediate controls (Card) -->
                        <Border Style="{StaticResource Card}">
                            <StackPanel>
                                <TextBlock Text="{x:Static res:Strings.TBS_Section_Immediate}" Style="{StaticResource SectionTitle}"/>
                                <WrapPanel>
                                    <TextBlock Text="{x:Static res:Strings.TBS_Label_Type}" Margin="0,0,6,0"/>
                                    <ComboBox x:Name="MeasType" Width="210" SelectedIndex="0">
                                        <!-- SCPI keywords must remain untranslated -->
                                        <ComboBoxItem Content="FREQuency"/>
                                        <ComboBoxItem Content="PERIod"/>
                                        <ComboBoxItem Content="MEAN"/>
                                        <ComboBoxItem Content="PK2Pk"/>
                                        <ComboBoxItem Content="RMS"/>
                                        <ComboBoxItem Content="RISe"/>
                                        <ComboBoxItem Content="FALL"/>
                                        <ComboBoxItem Content="MAXimum"/>
                                        <ComboBoxItem Content="MINImum"/>
                                        <ComboBoxItem Content="PDUty"/>
                                        <ComboBoxItem Content="NDUty"/>
                                        <ComboBoxItem Content="HIGH"/>
                                        <ComboBoxItem Content="LOW"/>
                                        <ComboBoxItem Content="AMPlitude"/>
                                    </ComboBox>

                                    <TextBlock Text="{x:Static res:Strings.TBS_Label_Source1}" Margin="8,0,6,0"/>
                                    <ComboBox x:Name="MeasSrc1" Width="90" SelectedIndex="0">
                                        <ComboBoxItem Content="CH1"/>
                                        <ComboBoxItem Content="CH2"/>
                                    </ComboBox>

                                    <TextBlock Text="{x:Static res:Strings.TBS_Label_Source2}" Margin="8,0,6,0"/>
                                    <ComboBox x:Name="MeasSrc2" Width="90" SelectedIndex="0">
                                        <ComboBoxItem Content=""/>
                                        <ComboBoxItem Content="CH1"/>
                                        <ComboBoxItem Content="CH2"/>
                                    </ComboBox>

                                    <Button Content="{x:Static res:Strings.Common_Apply}" Click="BtnMeasApply_Click" Margin="8,0,0,0"/>
                                    <Button Content="{x:Static res:Strings.TBS_Btn_ValueQ}" Click="BtnMeasRead_Click" Margin="8,0,0,0"/>
                                </WrapPanel>

                                <WrapPanel Margin="0,10,0,0">
                                    <Button Content="{x:Static res:Strings.TBS_Btn_Discover}" Click="BtnMeasDiscover_Click"/>
                                    <Button Content="{x:Static res:Strings.TBS_Btn_ReadSelected}" Click="BtnMeasReadSelected_Click" Margin="8,0,0,0"/>
                                    <TextBlock Text="{x:Static res:Strings.TBS_Hint_MultiSelect}" VerticalAlignment="Center" Margin="8,0,0,0"
                                               Foreground="{StaticResource SubtleFg}"/>
                                </WrapPanel>

                                <ListBox x:Name="MeasTypeList" SelectionMode="Extended" Height="160" Margin="0,10,0,0"/>
                            </StackPanel>
                        </Border>

                        <!-- On-screen slots (Card) -->
                        <Border Style="{StaticResource Card}" Margin="0,10,0,0">
                            <StackPanel>
                                <TextBlock Text="{x:Static res:Strings.TBS_Section_Slots}" Style="{StaticResource SectionTitle}"/>
                                <WrapPanel>
                                    <TextBlock Text="{x:Static res:Strings.TBS_Label_Slot}" Margin="0,0,6,0"/>
                                    <TextBox x:Name="MeasSlot" Width="60" Text="1"/>
                                    <TextBlock Text="{x:Static res:Strings.TBS_Label_Type}" Margin="8,0,6,0"/>
                                    <TextBox x:Name="MeasSlotType" Width="160" Text="FREQuency"/>
                                    <TextBlock Text="{x:Static res:Strings.TBS_Label_Src1Short}" Margin="8,0,6,0"/>
                                    <TextBox x:Name="MeasSlotS1" Width="80" Text="CH1"/>
                                    <TextBlock Text="{x:Static res:Strings.TBS_Label_Src2Short}" Margin="8,0,6,0"/>
                                    <TextBox x:Name="MeasSlotS2" Width="80" ToolTip="{x:Static res:Strings.TBS_Tooltip_Src2}"/>
                                    <Button Content="{x:Static res:Strings.TBS_Btn_ConfigSlot}" Click="BtnMeasSlotCfg_Click" Margin="8,0,0,0"/>
                                    <Button Content="{x:Static res:Strings.TBS_Btn_EnableSlot}" Click="BtnMeasSlotOn_Click" Margin="8,0,0,0"/>
                                    <Button Content="{x:Static res:Strings.TBS_Btn_DisableSlot}" Click="BtnMeasSlotOff_Click" Margin="8,0,0,0"/>
                                    <Button Content="{x:Static res:Strings.TBS_Btn_ReadSlot}" Click="BtnMeasSlotRead_Click" Margin="8,0,0,0"/>
                                </WrapPanel>

                                <WrapPanel Margin="0,10,0,0">
                                    <CheckBox x:Name="MeasGateCursor" Content="{x:Static res:Strings.TBS_Label_GateByCursors}"/>
                                    <Button Content="{x:Static res:Strings.TBS_Btn_ApplyGate}" Click="BtnMeasGate_Click" Margin="8,0,0,0"/>
                                    <Button Content="{x:Static res:Strings.TBS_Btn_ClearAllSlots}" Click="BtnMeasClearAllSlots_Click" Margin="8,0,0,0"/>
                                </WrapPanel>
                            </StackPanel>
                        </Border>

                        <!-- Live Mini Graphs (Card) -->
                        <Border Style="{StaticResource Card}" Margin="0,10,0,0">
                            <StackPanel>
                                <TextBlock Text="{x:Static res:Strings.TBS_Section_LiveMini}" Style="{StaticResource SectionTitle}"/>
                                <TextBlock Margin="0,0,0,8"
                                           Text="{x:Static res:Strings.TBS_Info_MiniGraphs}"
                                           Foreground="{StaticResource SubtleFg}"/>
                                <TextBlock Text="CH1" FontWeight="SemiBold"/>
                                <WrapPanel x:Name="MiniWrapCh1" Margin="0,4,0,8"/>
                                <Separator/>
                                <TextBlock Text="CH2" FontWeight="SemiBold" Margin="0,8,0,0"/>
                                <WrapPanel x:Name="MiniWrapCh2" Margin="0,4,0,0"/>
                            </StackPanel>
                        </Border>
                    </StackPanel>
                </ScrollViewer>
            </TabItem>
        </TabControl>

        <!-- Console / Output (Card) -->
        <Border Grid.Row="2" Margin="16,0,16,16" Style="{StaticResource Card}">
            <DockPanel LastChildFill="True">
                <TextBlock Text="{x:Static res:Strings.TBS_Section_Console}" Style="{StaticResource SectionTitle}" DockPanel.Dock="Top"/>
                <TextBox x:Name="ConsoleOut"
                         FontFamily="Consolas" FontSize="12"
                         TextWrapping="NoWrap" AcceptsReturn="True"
                         VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Auto"
                         IsReadOnly="True"/>
            </DockPanel>
        </Border>
    </Grid>
</UserControl>
